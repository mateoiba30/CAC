PIC EQU 20H; EOI IMR IRR ISR INT0(F10)
PIO EQU 30H;PA PB CA CB
N_F10 EQU 10

ORG 40
IP_F10 DW RUT_F10

ORG 1200H
CANT DB ?
INICIO DB ?

ORG 3000H

RUT_F10:IN AL,PIO
MOV [BX],AL
INC BX
INC CH

MOV AL,20H
OUT PIC,AL
IRET

CONF_PIC:MOV AL,11111110B
OUT PIC+1,AL
MOV AL,N_F10
OUT PIC+4,AL
RET

CONF_PIO:MOV AL,0FFH
OUT PIO+2,AL
RET

ORG 2000H
CLI
CALL CONF_PIC
CALL CONF_PIO
MOV CH,0;CONTADOR DE CARACTERES
MOV BX, OFFSET INICIO
STI

ESPERAR: IN AL,PIO
CMP AL,0FFH
JNZ ESPERAR

MOV AL,CH
DEC AL;PARA QUE NO IMPRIMA EL FFH
MOV BX,OFFSET INICIO
INT 7

MOV BX,OFFSET CANT
MOV [BX],CH
MOV AL,1
INT 7

INT 0
END