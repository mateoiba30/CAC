PIC EQU 20H; EOI IMR IRR ISR INT0 INT1(TIMER)
TIMER EQU 10H;CONT COMP
N_CLK EQU 10

ORG 40
IP_CLK DW RUT_CLK

ORG 1000H

DMIN DB 30H
UMIN DB 30H; '0'
PUNTOS DB  3AH; ':'
DSEG DB 30H
USEG DB 30H
ESPACIO DB 20H

ORG 3000H

CONF_PIC:PUSH AX
MOV AL,11111101B
OUT PIC+1, AL
MOV AL,N_CLK
OUT PIC+5,AL
POP AX
RET

CONF_CLK:PUSH AX
MOV AL,0
OUT TIMER,AL
MOV AL,10
OUT TIMER+1,AL
POP AX
RET

RUT_CLK:MOV BX,OFFSET DMIN
MOV AL, 6
INT 7

INC USEG
CMP USEG,3AH
JNZ SALTO1
MOV USEG,30H
INC DSEG

SALTO1:CMP DSEG,36H
JNZ SALTO2
MOV USEG,30H
MOV DSEG,30H
INC UMIN

SALTO2:CMP UMIN,3AH
JNZ SALTO3
MOV USEG,30H
MOV DSEG,30H
MOV UMIN,30H
INC DMIN

SALTO3:CMP DMIN,36H
JNZ SALTO4
MOV USEG,30H
MOV DSEG,30H
MOV UMIN,30H
MOV DMIN,30H

SALTO4:MOV AL,0
OUT TIMER,AL

MOV AL,20H
OUT PIC,AL

IRET

ORG 2000H

CLI
CALL CONF_PIC
CALL CONF_CLK
STI

ESPERAR:JMP ESPERAR

INT 0
END