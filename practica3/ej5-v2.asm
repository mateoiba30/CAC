PIO EQU 30H;PA PB CA CB

ORG 1000H
NUM DB ?

ORG 3000H

CONF_IMPR:PUSH AX
MOV AL, 0FDH
OUT PIO+2,AL;CONFIGURO CA
MOV AL,0
OUT PIO+3,AL;CONFIGURO CB
IN AL,PIO
AND AL,0FDH;NO CONFUNIDIRME!!!
OUT PIO,AL;DESACT STROBE
POP AX
RET

PULSO:PUSH AX
IN AL,PIO
OR AL,02H
OUT PIO,AL;ACTIVO STROBE
IN AL,PIO
AND AL,0FDH
OUT PIO,AL;DESACT STROBE
POP AX
RET

ORG 2000H

CALL CONF_IMPR
MOV CL,5H;CONTADOR DE CARACTERES A ENVIAR
MOV BX, OFFSET NUM

POLL:IN AL,PIO
AND AL,1;CHEQUEO BIT DE BUSY
JNZ POLL

INT 6;LEO
MOV AL,[BX]
OUT PIO+1,AL;MANDO A PIO
CALL PULSO;MANDO A IMPRIMIR
DEC CL
JNZ POLL

INT 0
END